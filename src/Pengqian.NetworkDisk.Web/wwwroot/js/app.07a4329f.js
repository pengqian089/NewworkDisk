(function(t){function e(e){for(var r,o,s=e[0],c=e[1],l=e[2],h=0,p=[];h<s.length;h++)o=s[h],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&p.push(i[o][0]),i[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(p.length)p.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],r=!0,s=1;s<a.length;s++){var c=a[s];0!==i[c]&&(r=!1)}r&&(n.splice(e--,1),t=o(o.s=a[0]))}return t}var r={},i={app:0},n=[];function o(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=r,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(a,r,function(e){return t[e]}.bind(null,r));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0a23":function(t,e,a){},"1cad":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),i=a("8c4f"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"beg-login-bg"},[a("div",{staticClass:"beg-login-box"},[a("div",{staticClass:"beg-login-main"},[a("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[a("label",{staticClass:"beg-login-icon",staticStyle:{float:"left"},attrs:{for:"account"}},[t._v("账号")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.account,expression:"account"}],attrs:{type:"text",id:"account",required:"required",autocomplete:"off",placeholder:"账号"},domProps:{value:t.account},on:{input:function(e){e.target.composing||(t.account=e.target.value)}}})]),a("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[a("label",{staticClass:"beg-login-icon",staticStyle:{float:"left"},attrs:{for:"password"}},[t._v("密码")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",id:"password",required:"required",autocomplete:"off",placeholder:"密码"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),a("div",[a("button",{staticClass:"login-btn",attrs:{type:"button"},on:{click:t.login}},[t._v("登 录")])])])])])},o=[],s={name:"login",data:function(){return{account:"",password:""}},methods:{login:function(){var t=this;if(""!==this.account)if(""!==this.password){var e=this;this.request.post("/api/Account",{account:this.account,password:this.password}).then((function(e){t.$store.commit("setToken",e),localStorage.account=e.account,localStorage.tokenExpire=e.expires,localStorage.token=e.token,t.$router.push({path:"/"})})).catch((function(t){400===t.response.status?e.layer.msg("用户名或密码错误！"):e.layer.alert(t)}))}else this.layer.msg("请输入密码！");else this.layer.msg("请输入账号！")}}},c=s,l=(a("7488"),a("2877")),u=Object(l["a"])(c,n,o,!1,null,"6f39b4bb",null),h=u.exports,p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"code-box"},[a("div",{staticClass:"box-header"},[a("div",{staticClass:"details-container"},[a("div",{staticClass:"desc"},[a("a",{staticStyle:{"margin-right":"10px"},attrs:{href:"javascript:;"},on:{click:t.createDir}},[t._v("新建文件夹")]),a("input",{staticStyle:{"margin-right":"10px"},attrs:{id:"file",type:"file"},on:{change:t.upload}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],attrs:{type:"text",id:"txtSearch"},domProps:{value:t.searchText},on:{input:function(e){e.target.composing||(t.searchText=e.target.value)}}}),t._v(" "),a("a",{attrs:{href:"javascript:;"},on:{click:t.search}},[t._v("搜索")])]),a("div",{staticClass:"desc"},[t._v(" "+t._s(t.currentPath.join("/"))+" ")])])]),a("div",{staticClass:"box-rows"},[t.isRoot?t._e():a("div",{staticClass:"row prev"},[a("div",{staticClass:"header"},[a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.goToPrev(t.prevUrl)}}},[a("span",{staticStyle:{"min-width":"16px"}},[t._v("上一页")])])])]),t._l(t.directories,(function(e){return a("div",{key:e.name,staticClass:"row",attrs:{todo:e}},[a("div",{staticClass:"icon"},[a("svg",{staticClass:"git-dir",attrs:{height:"16",color:"blue-3","aria-label":"Directory",viewBox:"0 0 16 16",width:"16",role:"img"}},[a("path",{attrs:{d:"M1.75 1A1.75 1.75 0 000 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75 0 0016 13.25v-8.5A1.75 1.75 0 0014.25 3h-6.5a.25.25 0 01-.2-.1l-.9-1.2c-.33-.44-.85-.7-1.4-.7h-3.5z"}})])]),a("div",{staticClass:"header"},[a("span",[a("a",{attrs:{href:"javascript:;",title:e.name},on:{click:function(a){return t.openDir(e.name)}}},[t._v(t._s(e.name))])])]),t._m(0,!0),a("div",{staticClass:"time"},[a("a",{staticStyle:{"margin-right":"8px"},attrs:{href:"javascript:;"},on:{click:function(a){return t.delDir(e.name)}}},[t._v("删除")]),a("a",{attrs:{href:"javascript:;"},on:{click:function(a){return t.renameDir(e.name)}}},[t._v("重命名")])])])})),t._l(t.files,(function(e){return a("div",{key:e.name,staticClass:"row",attrs:{todo:e}},[a("div",{staticClass:"icon"},[a("svg",{staticClass:"git-file",attrs:{height:"16",color:"gray-light","aria-label":"File",viewBox:"0 0 16 16",width:"16",role:"img"}},[a("path",{attrs:{d:"M3.75 1.5a.25.25 0 00-.25.25v11.5c0 .138.112.25.25.25h8.5a.25.25 0 00.25-.25V6H9.75A1.75 1.75 0 018 4.25V1.5H3.75zm5.75.56v2.19c0 .138.112.25.25.25h2.19L9.5 2.06zM2 1.75C2 .784 2.784 0 3.75 0h5.086c.464 0 .909.184 1.237.513l3.414 3.414c.329.328.513.773.513 1.237v8.086A1.75 1.75 0 0112.25 15h-8.5A1.75 1.75 0 012 13.25V1.75z"}})])]),a("div",{staticClass:"header"},[a("span",[a("a",{attrs:{href:"javascript:;",title:e.name}},[t._v(t._s(e.name))])])]),t._m(1,!0),a("div",{staticClass:"time"},[a("a",{staticStyle:{"margin-right":"8px"},attrs:{href:"/network-disk/download?path="+(0===t.currentPath.length?"":t.currentPath.join("/")+"/")+e.name+"&account="+t.$store.getters.getAccount,target:"_blank"}},[t._v("下载")]),a("a",{staticStyle:{"margin-right":"8px"},attrs:{href:"javascript:;"},on:{click:function(a){return t.delFile(t.currentPath,e.name)}}},[t._v("删除")]),a("a",{attrs:{href:"javascript:;"},on:{click:function(a){return t.rename(t.currentPath,e.name)}}},[t._v("重命名")])])])}))],2)])])},d=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"desc"},[a("span")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"desc"},[a("span")])}],f=(a("a15b"),{data:function(){return{isRoot:!1,directories:[],files:[],prevUrl:[],currentPath:[],path:[],searchText:""}},mounted:function(){this.$nextTick((function(){console.log("start");var t=this,e=this.path.join("/");this.request.fetch("/api/disk/myFolder",{path:e}).then((function(e){t.isRoot=e.isRoot,t.directories=e.directories,t.files=e.files,t.prevUrl=e.prevUrl,t.currentPath=e.currentPath}))}))},name:"NetworkDisk",methods:{reloadDir:function(){var t=this.path.join("/"),e=this;this.request.fetch("/api/disk/myFolder",{path:t}).then((function(t){e.isRoot=t.isRoot,e.directories=t.directories,e.files=t.files,e.prevUrl=t.prevUrl,e.currentPath=t.currentPath}))},openDir:function(t){this.path.push(t),this.reloadDir()},goToPrev:function(t){var e=this;this.request.fetch("/api/disk/myFolder",{path:t.join("/")}).then((function(a){e.isRoot=a.isRoot,e.directories=a.directories,e.files=a.files,e.prevUrl=a.prevUrl,e.currentPath=a.currentPath,e.path=t}))},createDir:function(){var t=this;this.layer.prompt({title:"请输入文件夹名称",formType:1},(function(e,a){var r=t.layer.loading();t.request.post("/api/disk/create",{path:t.path.join("/"),name:e}).then((function(){t.reloadDir(),t.layer.close(a),t.layer.close(r)}))}))},search:function(){this.$router.push({path:"search",query:{key:this.searchText}})},delFile:function(t,e){var a=this;this.request.post("/api/disk/file",{path:t.join("/"),name:e}).then((function(){a.reloadDir()}))},rename:function(t,e){var a=this;this.layer.prompt({title:"请输入新名称",formType:1},(function(r,i){var n=a.layer.loading();a.request.post("/api/disk/renameFile",{path:t.join("/"),fileName:e,newFileName:r}).then((function(){a.reloadDir(),a.layer.close(i),a.layer.close(n)}))}))},delDir:function(t){var e=this,a=this.currentPath;a.push(t),console.log(a),this.request.post("/api/disk/dir",{path:a.join("/")}).then((function(){e.reloadDir()}))},renameDir:function(t){var e=this,a=this.currentPath;a.push(t),this.layer.prompt({title:"请输入新名称",formType:1},(function(t,r){var i=e.layer.loading();e.request.post("/api/disk/RenameFolder",{path:a.join("/"),NewName:t}).then((function(){e.reloadDir(),e.layer.close(r),e.layer.close(i)}))}))},upload:function(t){var e=this,a=t.target.files[0],r=new FormData;r.append("file",a),r.append("path",this.currentPath.join("/")),console.log(r.get("file"));var i={headers:{"Content-Type":"multipart/form-data"}},n=this.layer.loading();this.$axios.post("/api/disk/upload",r,i).then((function(){e.reloadDir(),e.layer.close(n)}))}}}),v=f,m=(a("b18d"),Object(l["a"])(v,p,d,!1,null,"683bd598",null)),g=m.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"code-box"},[a("div",{staticClass:"box-header"},[a("div",{staticClass:"details-container"},[a("div",{staticClass:"desc"},[a("a",{staticStyle:{"margin-right":"10px"},attrs:{href:"javascript:;"},on:{click:t.goBack}},[t._v("返回")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],attrs:{type:"text",id:"txtSearch"},domProps:{value:t.searchText},on:{input:function(e){e.target.composing||(t.searchText=e.target.value)}}}),t._v(" "),a("a",{attrs:{href:"javascript:;"},on:{click:t.search}},[t._v("搜索")])])])]),a("div",{staticClass:"box-rows"},t._l(t.files,(function(e){return a("div",{key:e.id,staticClass:"row",attrs:{todo:e}},[a("div",{staticClass:"icon"},[a("svg",{staticClass:"git-file",attrs:{height:"16",color:"gray-light","aria-label":"File",viewBox:"0 0 16 16",width:"16",role:"img"}},[a("path",{attrs:{d:"M3.75 1.5a.25.25 0 00-.25.25v11.5c0 .138.112.25.25.25h8.5a.25.25 0 00.25-.25V6H9.75A1.75 1.75 0 018 4.25V1.5H3.75zm5.75.56v2.19c0 .138.112.25.25.25h2.19L9.5 2.06zM2 1.75C2 .784 2.784 0 3.75 0h5.086c.464 0 .909.184 1.237.513l3.414 3.414c.329.328.513.773.513 1.237v8.086A1.75 1.75 0 0112.25 15h-8.5A1.75 1.75 0 012 13.25V1.75z"}})])]),a("div",{staticClass:"header"},[a("span",[a("a",{attrs:{href:"javascript:;",title:e.fileName}},[t._v(t._s(e.fileName))])])]),a("div",{staticClass:"desc"},[a("span",[a("a",{attrs:{title:e.path.join("/")}},[t._v(t._s(e.path.join("/")))])])]),a("div",{staticClass:"time"},[a("span",[a("a",{staticStyle:{"margin-right":"8px"},attrs:{href:"/network-disk/download?path="+(0===e.path.length?"":e.path.join("/")+"/")+e.fileName+"&account="+t.$store.getters.getAccount,target:"_blank"}},[t._v("下载")]),a("a",{staticStyle:{"margin-right":"8px"},attrs:{href:"javascript:;"},on:{click:function(a){return t.delFile(e.path,e.fileName)}}},[t._v("删除")]),a("a",{attrs:{href:"javascript:;"},on:{click:function(a){return t.rename(e.path,e.fileName)}}},[t._v("重命名")])])])])})),0)])])},k=[],x={name:"Search",data:function(){return{searchText:"",files:[]}},mounted:function(){this.$nextTick((function(){this.searchText=this.$route.query.key,this.reload()}))},methods:{reload:function(){var t=this;this.request.fetch("/api/disk/search",{key:this.searchText}).then((function(e){t.files=e}))},goBack:function(){window.history.length>1?this.$router.go(-1):this.$router.push("/")},search:function(){this.$router.push({path:"search",query:{key:this.searchText}}),this.reload()},delFile:function(t,e){var a=this;this.request.post("/api/disk/file",{path:t.join("/"),name:e}).then((function(){a.reload()}))},rename:function(t,e){var a=this;this.layer.prompt({title:"请输入新名称",formType:1},(function(r,i){var n=a.layer.loading();a.request.post("/api/disk/renameFile",{path:t.join("/"),fileName:e,newFileName:r}).then((function(){a.reload(),a.layer.close(i),a.layer.close(n)}))}))}}},b=x,w=(a("5a79"),Object(l["a"])(b,y,k,!1,null,"52f59541",null)),_=w.exports;r["a"].use(i["a"]);var j=new i["a"]({routes:[{path:"/login",component:h,name:"login"},{path:"/",component:g,name:"network disk",meta:{auth:!0}},{path:"/search",component:_,name:"search",meta:{auth:!0}}]}),C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("transition",{attrs:{name:"bounce"}},[a("router-view")],1)],1)},P=[],S={name:"App",data:function(){return{}},computed:{isLogin:function(){return!!localStorage.token}},components:{}},T=S,D=Object(l["a"])(T,C,P,!1,null,null,null),q=D.exports,$=a("bc3a"),N=a.n($);a("d3b7");function A(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(a,r){N.a.get(t,{params:e}).then((function(t){a(t.data)})).catch((function(t){return r(t)}))}))}function F(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(a,r){N.a.post(t,e).then((function(t){a(t.data)})).catch((function(t){return r(t)}))}))}N.a.interceptors.response.use((function(t){return Promise.resolve(t)}),(function(t){if(t.response.status)switch(t.response.status){case 403:break;case 500:console.info(t.response.data);break;default:console.info(t.response.data);break}return console.info("response error interceptors end."),Promise.reject(t)})),N.a.interceptors.request.use((function(t){return"undefined"!==typeof localStorage.token&&(t.headers.Authorization="Bearer "+localStorage.token),t}));var O=a("d842"),E=a.n(O),M=(a("2ba8"),a("2f62"));r["a"].use(M["a"]);var R=new M["a"].Store({state:{title:"网络磁盘",userInfo:{expire:"",token:"",account:""}},getters:{getToken:function(t){return t.userInfo.token},getAccount:function(){return localStorage.account},isLogin:function(){var t=Date.parse(new Date(R.state.userInfo.expire||localStorage.tokenExpire)),e=Date.parse(new Date);return console.log("nowTime : ",e,"expire : ",t),"undefined"!==typeof localStorage.token&&""!==localStorage.token&&t>e}},mutations:{setToken:function(t,e){t.userInfo.expire=e.expire,t.userInfo.token=e.token,t.userInfo.account=e.account}}}),z=R;r["a"].config.productionTip=!1,j.beforeEach((function(t,e,a){t.meta.auth?z.getters.isLogin?a():a({path:"/login",query:{redirect:t.fullPath}}):a()})),new r["a"]({render:function(t){return t(q)},router:j,store:z}).$mount("#app"),r["a"].prototype.$axios=N.a,r["a"].prototype.request={post:F,fetch:A},r["a"].prototype.layer=E()(r["a"])},"5a79":function(t,e,a){"use strict";var r=a("ad16"),i=a.n(r);i.a},7488:function(t,e,a){"use strict";var r=a("1cad"),i=a.n(r);i.a},ad16:function(t,e,a){},b18d:function(t,e,a){"use strict";var r=a("0a23"),i=a.n(r);i.a}});
//# sourceMappingURL=app.07a4329f.js.map