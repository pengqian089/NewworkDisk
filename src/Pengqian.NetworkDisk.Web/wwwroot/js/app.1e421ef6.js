(function(e){function t(t){for(var o,i,s=t[0],c=t[1],u=t[2],p=0,f=[];p<s.length;p++)i=s[p],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&f.push(r[i][0]),r[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);l&&l(t);while(f.length)f.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(o=!1)}o&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},r={app:0},a=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"162d":function(e,t,n){},"1cad":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),r=n("8c4f"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"beg-login-bg"},[n("div",{staticClass:"beg-login-box"},[n("div",{staticClass:"beg-login-main"},[n("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[n("label",{staticClass:"beg-login-icon",staticStyle:{float:"left"},attrs:{for:"account"}},[e._v("账号")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.account,expression:"account"}],attrs:{type:"text",id:"account",required:"required",autocomplete:"off",placeholder:"账号"},domProps:{value:e.account},on:{input:function(t){t.target.composing||(e.account=t.target.value)}}})]),n("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[n("label",{staticClass:"beg-login-icon",staticStyle:{float:"left"},attrs:{for:"password"}},[e._v("密码")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",id:"password",required:"required",autocomplete:"off",placeholder:"密码"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),n("div",[n("button",{staticClass:"login-btn",attrs:{type:"button"},on:{click:e.login}},[e._v("登 录")])])])])])},i=[],s={name:"login",data:function(){return{account:"",password:""}},methods:{login:function(){var e=this;if(""!==this.account)if(""!==this.password){var t=this;this.request.post("/api/Account",{account:this.account,password:this.password}).then((function(t){e.$store.commit("setToken",t),localStorage.account=t.account,localStorage.tokenExpire=t.expires,localStorage.token=t.token,e.$router.push({path:"/"})})).catch((function(e){400===e.response.status?t.layer.msg("用户名或密码错误！"):t.layer.alert(e)}))}else this.layer.msg("请输入密码！");else this.layer.msg("请输入账号！")}}},c=s,u=(n("7488"),n("2877")),l=Object(u["a"])(c,a,i,!1,null,"6f39b4bb",null),p=l.exports,f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h1",[e._v("network disk")])},d=[],g={data:function(){return{directoryInfo:{isRoot:!1,directories:[],files:[],prevUrl:[],currentPath:[]}}},mounted:function(){this.$nextTick((function(){console.log("start")}))},name:"NetworkDisk"},h=g,v=(n("83b0"),Object(u["a"])(h,f,d,!1,null,"1c5e92cf",null)),m=v.exports;o["a"].use(r["a"]);var b=new r["a"]({routes:[{path:"/login",component:p,name:"login"},{path:"/",component:m,name:"network disk",meta:{auth:!0}}]}),w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("transition",{attrs:{name:"bounce"}},[n("router-view")],1)],1)},y=[],k={name:"App",data:function(){return{}},computed:{isLogin:function(){return!!localStorage.token}},components:{}},x=k,S=Object(u["a"])(x,w,y,!1,null,null,null),_=S.exports,P=n("bc3a"),O=n.n(P);n("d3b7");function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,o){O.a.get(e,{params:t}).then((function(e){n(e.data)})).catch((function(e){return o(e)}))}))}function q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,o){O.a.post(e,t).then((function(e){n(e.data)})).catch((function(e){return o(e)}))}))}O.a.interceptors.response.use((function(e){return Promise.resolve(e)}),(function(e){if(e.response.status)switch(e.response.status){case 403:break;case 500:console.info(e.response.data);break;default:console.info(e.response.data);break}return console.info("response error interceptors end."),Promise.reject(e)})),O.a.interceptors.request.use((function(e){return"undefined"!==typeof localStorage.token&&(e.headers.Authorization="Bearer "+localStorage.token),e}));var T=n("d842"),$=n.n(T),I=(n("2ba8"),n("2f62"));o["a"].use(I["a"]);var C=new I["a"].Store({state:{title:"网络磁盘",userInfo:{expire:"",token:"",account:""}},getters:{getToken:function(e){return e.userInfo.token},isLogin:function(){var e=Date.parse(new Date(C.state.userInfo.expire||localStorage.tokenExpire)),t=Date.parse(new Date);return console.log("nowTime : ",t,"expire : ",e),"undefined"!==typeof localStorage.token&&""!==localStorage.token&&e>t}},mutations:{setToken:function(e,t){e.userInfo.expire=t.expire,e.userInfo.token=t.token,e.userInfo.account=t.account}}}),E=C;o["a"].config.productionTip=!1,b.beforeEach((function(e,t,n){e.meta.auth?E.getters.isLogin?n():n({path:"/login",query:{redirect:e.fullPath}}):n()})),new o["a"]({render:function(e){return e(_)},router:b,store:E}).$mount("#app"),o["a"].prototype.$axios=O.a,o["a"].prototype.request={post:q,fetch:j},o["a"].prototype.layer=$()(o["a"])},7488:function(e,t,n){"use strict";var o=n("1cad"),r=n.n(o);r.a},"83b0":function(e,t,n){"use strict";var o=n("162d"),r=n.n(o);r.a}});
//# sourceMappingURL=app.1e421ef6.js.map